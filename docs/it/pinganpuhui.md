spring事务的底层原理

-  TransactionDefinition
  - 用于保存事务的传播方式,隔离级别,超时,是否只读等参数
- PlatformTransactionManager
  - 用于控制事务的具体执行方式及实现 (对connection的相关操作)
- TransactionStatus
  - 用于存储事务类,事务的状态判断

32位操作系统和64位操作系统底层差异

- 处理能力不同. 32位系统CPU一次处理32位的数据,64位系统可以处理64位的数据
- 内存地址不同. 32位系统使用32位地址,最大支持2的32次方(4G)内存,64位系统使用64位地址,最大支持16TB内存.

集合的原理

- 列表
  -  ArrayList 数组
  -  LinkedList 链表
- 栈
  - FILO数组
- 队列
  -  LinkedBlockingQueue FIFO数组
  -  ArrayBlockingQueue 数组队列
- Set
  - 底层使用Map实现
- 字典
  -  HashMap  使用hash表实现,数组+链表/红黑树
  - TreeMap 使用红黑树实现

数据库中的游标要注意哪些东西

- 游标读取的行会加锁
- 会把游标所有数据加载到内存中

索引的原理

- B+树

微服务

微服务的拆分原则

- AKF原则
  - X 轴：直接水平复制应用进程来扩展系统。
  - Y 轴：将功能拆分出来扩展系统。
  - Z 轴：基于用户信息扩展系统。
- 服务/通信无状态
- 前后端分离

多线程

线程池的原理

![线程池执行流程](https://images2017.cnblogs.com/blog/1287675/201712/1287675-20171229231231929-1280812291.png)

高并发状态下如何保证数据的一致性？

- 数据库和缓存的一致性

  - 使用延时双删机制

    - 步骤
      - 先删除缓存
      - 再写数据库
      - 休眠500毫秒 （读写分离从库同步）
      - 再次删除缓存 （防止并发读了旧数据到缓存）
    - **方案利弊:**
      - 方案简单清晰,易于实现
      - 在绝大部分场景下能满足性能和数据一致性的合理要求
      - 频繁写和频繁读的场景下会增加缓存写入的耗时,极端情况会存在**缓存击穿**,即每次都要不能在缓存中命中,都要直接访问数据库.

  - 使用乐观锁

    >  对多个更新操作的业务加事物注解。在数据库表中加一个vesion版本控制字段（初始值为0)在更新操作前查询并记录该字段，更新操作完成vesion+1,再次查询vesion与更新操作前记录的值相差1说明前后数据一致，否则回滚更新操作 

  - 使用数据库事务

  - 

- 

高可用有哪些手段？

-  限流
- 隔离
- 降级
- 负载均衡
- 超时与重试
- 回滚
- 压测与预案 

缓存和分布式方面

高并发缓存的设计应用，

spring,过滤器和拦截器的区别

- 拦截器是基于Java的反射机制的，而过滤器是基于函数回调。
- 拦截器不依赖于servlet容器，过滤器依赖于servlet容器。
- 拦截器只能对action请求起作用，而过滤器则可以对几乎所有的请求起作用。
- 拦截器可以访问action上下文、值栈里的对象，而过滤器不能访问。
- 在action的生命周期中，拦截器可以多次被调用，而过滤器只能在容器初始化时被调用一次。
- 拦截器可以获取IOC容器中的各个bean，而过滤器就不行，这点很重要，在拦截器里注入一个service，可以调用业务逻辑。

索引什么时候比较慢

- 走了全表扫描
- 索引过滤效果不好
- 频繁回表
- 取出的行数占总表比例大、表行数很少

 in和exist底层的区别 优化手段，

- in会先检索子查询，**生成临时表**把外表和内表作hash 连接，再根据子查询记录进行主查询。适合子查询数据量少的情况
- exists会先进行主查询，在主查询中**循环遍历**外表，使用子查询过滤。适合主查询数据量少的情况
- 如果查询语句使用了not in 那么内外表都进行全表扫描，没有用到索引；而not exists 的子查询依然能用到表上的索引。**所以无论那个表大，用not exists都比not in要快**。

熔断器 eureka 容灾，

技术方面问redis用来干嘛

- 缓存数据
- 分布式锁

怎么保证不重复扣款

spring的启动过程

为啥map是线程不安全的

- 在jdk1.7中，在多线程环境下，扩容时会造成环形链或数据丢失。
-  在jdk1.8中，在多线程环境下，会发生数据覆盖的情况。 

需要对spring原理有清晰的认识，

springboot与springmvc的区别，

问了spring源码，aop原理，事务注解的注意事项，

空白期多长会有风险

- 数据库连接会断开，导致服务需要重启

redis synchronize和lock的区别 ，

Kafka的分区，然后问了下我现在做的项目的结构我简单讲解了下 ，

数据库性能相关的多一些，主要是表结构方面的，再就是微服务方面的问题，还有中件间，

主要问的rabbit 消息持久化，消息丢失，ioc 和aop相关，然后最近看哪些非技术类书籍，AI大数据这块的了解等。